# 声明

**本奋斗史有点随笔的感觉，记载的比较杂碎，前期缺失的东西不是会立马更新**

# 规范

1. ~~前后端使用json格式进行数据交互~~

2. ~~使用 BaseServlet~~
3. ~~使用 MVC 分包~~
4. ~~对接口返回结果使用统一结果集~~
5. ~~Git提交粒度尽可能小，一个功能至少提交一次,修复一个bug也提交一次~~

# QG技术论坛

## 题目要求

在当今技术驱动的时代，开发者、工程师和技术爱好者需要一个高效的交流平台，分享知识、解决难
题并探索前沿技术。为此，我们需要开发一个极客技术论坛系统，专注于技术交流。

## 必做

### 用户系统

* 注册登陆
* 个人信息中心(头像上传，昵称修改，举报，信息通知等)
* 包含普通用户和系统管理员
* 可以关注用户，主页优先推送关注的用户的帖子
* 可以关注技术板块，优先展示用户关注的板块(如AI,区块链，Web开发等板块)板块管理

### 板块管理

* 用户申请创建xx板块，成为版主(需要系统管理员审核)
* 吧主权限
  * 发布版块公告——置顶在板块最顶端
  * 删除帖子
  * 封禁用户(封禁后用户禁止发帖)
* 用户权限
  * 发布帖子
  * 举报帖子(举报给吧主进行管理)
  * 举报用户(举报给系统管理员)
  * 在帖子下面留言评论
* 搜索查询
  * 在论坛首页搜索各种板块，在板块里可以通过关键字搜索帖子
  * 可查看最新帖子和热门帖子(浏览量/点赞量)以及热门板块

### 帖子相关

* 一个帖子可以包含文字和图像
* 包含点赞收藏功能(收藏帖子，对帖子\评论点赞)
* 可浏览自己的帖子足迹(历史记录)

## 选做(加分项)

1. 接入大模型API,实现AI智能总结帖子内容
2. **渲染文章支持Markdown、代码高亮，前端可以使用现成的三房库**
3. **用户之间可以进行实时性的聊天，即私聊功能**
4. **加入用户分级功能，并基于高等级用户相应特权(如帖子优先展示等)**
5. **评论可以@用户，用户可以收到被@的通知，帖子被点赞也可以接收到通知**
6. **不仅对帖子进行评论，也可以对评论进行跟评，参考B站视频的评论**
7. 实现热点数据存入缓存层,提高查询性能,如Redis,Caffein,Ehcache等,实现方法不限,体现缓存思
   想即可，即查询数据先去缓存查，缓存查不到再去数据库查，对热点数据的判断自行实现

# 注意事项

* 前后分离的项目注意跨域问题，可以使用Nginx部署前端项目，同时作为反向代理处理请求避免跨域，
  自行学习
* 大模型自费充值购买Token,推荐使用DeepSeek，电脑资源足够的话可以本地部署大模型进行调用
* ~~不允许使用一些第三方的框架,例如Mybatis,Mybatis-Plus,Spring,SpringBoot以及这些框架相~~
  ~~关生态的依赖或框架，允许自己手搓框架~~
* **不要只是对着需求做系统，一些用户体验只看需求去做是做不出来的，请结合自己使用其他系统的体**
  **验，综合考虑整个系统的功能，可以适当添加提升体验的功能和交互**

## 进阶技术要求(通用加分项)

1. 基于Nginx实现负载均衡(多实例部署)
2. 部署项目到公网服务器上，实现公网访问服务（随时随地可以访问系统，推荐购买阿里云2核2g服务
   器，第一次有优惠)
3. **使用大小组学习阶段做出来的通用CRUD工具类以及数据库连接池**
4. **使用JUnit进行单元测试**
5. **良好的异常处理**
6. **记录操作日志到数据库，包含用户登陆等，以便于溯源，最好可以在管理员页面看到日志信息**
7. **实现验证码注册登录、用户密码加密(传输层次以及存储层次)**
8. **使用JAVA8的新特性优化你的代码,如时间类(LocalDateTime)、Stream、Optional等**
9. 使用Apifox,postman,eoLink,swagger等工具记录接口文档(这是开发的良好习惯,也方便测试
   接口，任选其一使用即可)
10. 使用常量类和配置文件
11. 对多角色多权限使用RBAC模型和JWT进行认证鉴权
12. 拥有良好的注释习惯和日志记录(控制台输出或数据库记录)
13. 需要有足够的健壮性和防御性，前后端使用正则表达式校验，抵御SQL注入，XSS攻击，并对用户数
    据进行脱敏
14. 手搓ORM框架替代通用CRUD工具类与数据库进行交互
15. 学习像Spring一样实现依赖注入(DI:Dependency Injection)、进行控制反转(IOC:Inverse
    OfControl)、面向切面编程(AOP:Aspect Oriented Programming)

---

---

---

---

---

# 4月12日 & 15日 - 设计sql表格（后期有更新扩展）

## 需求分析

>论坛							  # 登录界面一个单独的html，loginCotroller...（直接用我小组作业现成的）
>├── 板块					 # 申请——创建成功，一个单独html
>│   ├── 帖子				# 单独的html
>│   │   ├──  二连 			  # 点赞 + 收藏，没有投币
>│   │   ├──  评论			   # 
>│   │   └──  关注
>│   │       └──  更新了通知
>│   │           └── 主页推送
>│   └──
>│       ├──  小黑屋   # 
>│       └──  公告	    		   # 
>├──  用户登录            # 账号、密码、是不是系统管理员
>└──  用户通知            # 点赞，评论，系统通知
>
>└──  举报          
>
>---

1. 登录注册——用户信息

* user表

2. 帖子信息放在哪里？

* 新开一个表post

3. 历史记录如何实现？

* 每次浏览帖子，记录版号、帖子序号
* 追问：**序号**存储在哪？
  * 新开一个sql的表`history`
    * 主键：id
    * 用户——user表主键
    * **序号**
    * 浏览时间：time
  * 每次点击都直接在sql中新增一行数据
    * 重复点击覆盖旧浏览记录
    * 先**能跑就行**👇
    * 如果几w用户同时使用，那数据库会很热闹

4. 如何上传图片？图片储存在哪里？

* **没想好怎么上传**
* 通过url存储在**？？？**

5. 点赞个数存储在哪？需要让版主看到有谁点赞了吗？

* 不需要让版主看到吧
* 自己被点赞了会收到短信通知（某某某给你点了个赞）——参考B站
* 没必要再开一个表格

### user表——用户

>主键：id - Integer
>
>账号：
>
>* 邮箱：email String
>* 手机号：phone
>
>密码：password
>
>是否为系统管理员：is_admin
>
>昵称：name
>
>等级：grade
>
>头像：avatar
>
>是否接收点赞信息：if_receive_like
>
>---

### board表——板块

>主键：id
>
>版主id：host_id
>
>创建时间：time
>
>帖子数量：post_count
>
>---

### report表——举报

>主键：id
>
>举报者用户主键：user_id
>
>版号：board_id
>
>帖子序号：post_id
>
>被举报者用户主键：reported_id
>
>向谁举报：judge
>
>* REPORT_TO_HOST——1——版主
>* REPORT_TO_ADMIN——0——管理员
>
>---

### history表——历史记录

>**用上我的搜索、批量删除方法**
>
>**见需求分析——3**
>
>主键：id
>
>用户主键：user_id
>
>版号：board_id
>
>帖子序号：post_id
>
>浏览时间：time
>
>---

### collect表——收藏

>主键：id
>
>用户主键：user_id
>
>版号：board_id
>
>帖子序号：post_id
>
>---

### notice表——版块公告

>主键：id
>
>板块主键：board_id
>
>公告发布时间：time
>
>公告内容：word
>
>---

### comment表——评论

>主键：id
>
>帖子id：post_id
>
>公告发布时间：time
>
>帖子内容：content
>
>评论者id：user_id
>
>父评论id：parent_id（没有则为NULL）
>
>点赞数：like
>
>FOREIGN KEY (post_id) REFERENCES post(id) ON DELETE CASCADE,
>FOREIGN KEY (parent_id) REFERENCES comment(id) ON DELETE CASCADE
>
>---

### post表——帖子

>主键：id
>标题：title
>内容：content
>作者id：author_id
>板块id：board_id
>浏览次数：view
>点赞数：like
>创建时间：time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
>
>FOREIGN KEY (board_id) REFERENCES board(id) ON DELETE CASCADE
>
>---

### board_ban表——某板块下被禁止发帖

> 主键：id
> 被禁止的用户id：ban_id
> 板块id：board_id
>
> FOREIGN KEY (board_id) REFERENCES board(id) ON DELETE CASCADE
>
> ---

### message表——通知

>主键：id
>
>内容：content
>
>发给谁：user_id
>
>time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
>
>---

### log表——日志

>主键：id
>
>谁：user_id
>
>👆名字：user_name
>
>干了什么事情：do
>
>在哪干的：ip
>
>什么时候干的：time
>
>---

# 4月16日 - 登录注册忘记密码

## 需求分析

>* 正常业务逻辑
>* 密码**哈希加盐**处理
>* 修改密码发送邮件验证**（放最后再搞）**
>
>---

若前后端都传输加密密码，俩次加密方式不一致，无法正确匹配

* 暂时放弃前端传输到后端过程的加密



# 4月17日 - 上传头像与静态个人界面

>* 图片保存到哪
>  * 保存到本地
>  * sql中存储路径
>
>* 个人界面-----参考了B站个人界面
>  * 我收到的点赞数
>  * 我的帖子被阅览总数
>  * 我的粉丝
>  * 我的关注
>  * 我的收藏
>  * 我的历史记录
>  * 我的版块
>  * 我的帖子
>
>
>---













